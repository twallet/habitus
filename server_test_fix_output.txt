[dotenv@17.2.3] injecting env (19) from config\.env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

[1m[46m RUN [49m[22m [36mv4.0.14 [39m[90mD:/Code/habitus[39m

 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mTrust Proxy Configuration[2m > [22mshould set trust proxy when TRUST_PROXY is true[32m 9[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mTrust Proxy Configuration[2m > [22mshould not set trust proxy when TRUST_PROXY is not true[32m 1[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mRequest Logging Middleware Logic[2m > [22mshould log requests in production mode[32m 51[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mRequest Logging Middleware Logic[2m > [22mshould log errors in development mode[32m 16[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mRequest Logging Middleware Logic[2m > [22mshould skip logging for Vite HMR routes in development[32m 15[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mRequest Logging Middleware Logic[2m > [22mshould log requests when VERBOSE_LOGGING is enabled in development[32m 11[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mCORS Configuration[2m > [22mshould use CORS with origin true in development[32m 1[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mCORS Configuration[2m > [22mshould use default CORS in production[32m 1[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mHealth Check Endpoint[2m > [22mshould return ok status for health check[32m 17[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mStatic File Serving[2m > [22mshould configure static file serving for uploads[32m 1[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mVite Dev Server Initialization Logic[2m > [22mshould return null in production mode[32m 0[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mVite Dev Server Initialization Logic[2m > [22mshould handle Vite initialization logic in development[32m 0[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mProduction Static File Serving Logic[2m > [22mshould serve static files from frontend/dist in production[32m 0[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mProduction Static File Serving Logic[2m > [22mshould serve index.html for all non-API routes in production[32m 1[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mDevelopment Vite Route Handling Logic[2m > [22mshould skip API routes when serving via Vite[32m 19[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mDevelopment Vite Route Handling Logic[2m > [22mshould skip uploads routes when serving via Vite[32m 14[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mDevelopment Vite Route Handling Logic[2m > [22mshould skip health check route when serving via Vite[32m 9[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mDevelopment Vite Route Handling Logic[2m > [22mshould handle errors when transforming index.html[32m 9[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer Initialization and Shutdown Logic[2m > [22mshould handle database initialization failure[32m 4[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer Initialization and Shutdown Logic[2m > [22mshould handle graceful shutdown logic[32m 31[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Integration - Actual Import Tests[2m > [22mshould import server.ts with all mocks in place[33m 545[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Integration - Actual Import Tests[2m > [22mshould import server.ts in development mode with Vite[32m 12[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Integration - Actual Import Tests[2m > [22mshould handle Vite initialization error[32m 16[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Integration - Actual Import Tests[2m > [22mshould handle server.ts import with TRUST_PROXY enabled[32m 9[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Integration - Actual Import Tests[2m > [22mshould handle server.ts import with development mode and Vite server[32m 10[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould execute middleware with real HTTP requests[33m 741[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould execute middleware for error responses[33m 487[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould execute shutdown handler for SIGTERM[33m 434[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould execute shutdown handler for SIGINT[33m 424[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle shutdown with Vite server[33m 516[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle shutdown when server.close fails[33m 431[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle database close error during shutdown[33m 548[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle Vite close error during shutdown[33m 529[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle database initialization failure[33m 733[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould execute production static file serving branch[33m 421[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould execute development Vite route handling[33m 422[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould skip Vite routes in logging middleware[33m 502[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle error in Vite transformIndexHtml[33m 437[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould prevent multiple shutdown calls[33m 436[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould execute verbose logging in development mode[33m 489[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle TRUST_PROXY configuration[33m 420[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle port conflict error with helpful message[33m 737[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle URL parsing failure and use localhost[33m 426[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould parse VITE_HMR_PORT environment variable[33m 436[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould return 404 when index.html does not exist in production[33m 433[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle readFileSync error in production[33m 442[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould skip error handling when headers already sent[33m 436[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle URL without http prefix[33m 431[2mms[22m[39m
 [32mâœ“[39m backend/src/__tests__/server.test.ts[2m > [22mServer Configuration - Integration Tests[2m > [22mServer.ts Complete Integration - Real Execution Tests[2m > [22mshould handle URL with http prefix[33m 421[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m49 passed[39m[22m[90m (49)[39m
[2m   Start at [22m 15:54:40
[2m   Duration [22m 14.39s[2m (transform 978ms, setup 507ms, import 841ms, tests 12.54s, environment 0ms)[22m

